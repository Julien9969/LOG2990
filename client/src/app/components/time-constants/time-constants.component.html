<span class="horizontal-bar" id="time-infos">
    <p>
        Constantes de jeu: 
    </p>
    <div class="info">
        <a><mat-icon>alarm</mat-icon></a>
        Temps initial : {{ this.gameConstants.time }}s
    </div>
    <div class="info">
        <a><mat-icon>alarm_add</mat-icon></a>
        Récompense : {{ this.gameConstants.reward }}s
    </div>
    <div class="info">
        <a><mat-icon>alarm_off</mat-icon></a>
        Pénalité : {{ this.gameConstants.penalty }}s
    </div>
    <button mat-raised-button color="primary" (click)="openEditPopup()">Modifier constantes</button>
</span>

<div *ngIf="this.editingConstants" id="constants-edit">
    <h1 id="title" mat-dialog-title>Modification des constantes de jeu.</h1>
        <form class="constants-form">            
            <mat-form-field class="full-width">
                <mat-label>Temps initial du compte à rebours</mat-label>
                <input
                    #timerInput
                    type="text"
                    autofocus
                    (keyup)="this.modifiedGameConstants.time = convertToNumber(timerInput.value)"
                    matInput
                    [placeholder]="this.gameConstants.time + 's \t (Entre ' + this.timeConstantBounds.minTime + ' et ' + this.timeConstantBounds.maxTime + ')'"
                    [formControl]="this.timeFormControl"
                    />
                    <mat-error *ngIf="this.timeFormControl.hasError('pattern')"> Entrez un nombre entier positif.</mat-error>
                    <mat-error *ngIf="!this.timeFormControl.hasError('pattern') && (this.timeFormControl.hasError('min') || this.timeFormControl.hasError('max'))"> Les valeurs doivent être dans les plages autorisées.</mat-error>
                </mat-form-field>
            <mat-form-field class="full-width">
                <mat-label>Temps gagné avec la découverte d’une différence</mat-label>
                <input
                    #rewardInput
                    type="text"
                    autofocus
                    (keyup)="this.modifiedGameConstants.reward = convertToNumber(rewardInput.value)"
                    matInput
                    [placeholder]="this.gameConstants.reward + 's \t (Entre ' + this.timeConstantBounds.minReward + ' et ' + this.timeConstantBounds.maxReward + ')'"
                    [formControl]="this.rewardFormControl"
                />
                <mat-error *ngIf="this.rewardFormControl.hasError('pattern')"> Entrez un nombre entier positif.</mat-error>
                <mat-error *ngIf="!this.rewardFormControl.hasError('pattern') && (this.rewardFormControl.hasError('min') || this.rewardFormControl.hasError('max'))"> Les valeurs doivent être dans les plages autorisées.</mat-error>
            </mat-form-field>
            <mat-form-field class="full-width">
                <mat-label>Temps de pénalité par indice</mat-label>
                <input
                    #penaltyInput
                    type="text"
                    autofocus
                    (keyup)="this.modifiedGameConstants.penalty = convertToNumber(penaltyInput.value)"
                    matInput
                    [placeholder]="this.gameConstants.penalty + 's \t (Entre ' + this.timeConstantBounds.minPenalty + ' et ' + this.timeConstantBounds.maxPenalty + ')'"
                    [formControl]="this.penaltyFormControl"
                />
                <mat-error *ngIf="this.penaltyFormControl.hasError('pattern')"> Entrez un nombre entier positif.</mat-error>
                <mat-error *ngIf="!this.penaltyFormControl.hasError('pattern') && (this.penaltyFormControl.hasError('min') || this.penaltyFormControl.hasError('max'))"> Les valeurs doivent être dans les plages autorisées.</mat-error>
            </mat-form-field>
        </form>
        <mat-dialog-actions class="button-row">
            <button mat-button [disabled]="!this.validateGameConstants()" (click)="updateGameConstants()" aria-label="Sauvegarder">Sauvegarder</button>
            <button mat-button aria-label="Retour" (click)="cancelConstantsEdit()">Retour</button>
        </mat-dialog-actions>
</div>
